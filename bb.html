<!doctype html>
<html>
<head>
	<title>Backbone Test</title>
	<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="l5r.css">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.9/backbone-min.js"></script>
	<script>
		$(document).ready(function () {
			window.Information = Backbone.Model.extend({
				defaults: {
					Name: '',
					Rank: '',
					Clan: '',
					Exp: '', 
					School: '',
					Insight: ''
				}
			});

			window.information = new Information();

			window.CharSheet = Backbone.View.extend({
				el: $('#info'),

				model: information,

				events: {
					"change input" : "setInfo",
				},

			    setInfo: function(e) {
			    	this.model.set(e.target.id, e.target.value);
			    },

			    initialize: function() {
			    	this.render();
			    },

			    render: function () {
			    	var container = $(this.el);
			    	var count = 0;
			    	var parent;
			    	for (key in this.model.defaults) {
			    		var id = 'row' + Math.floor(count/2);
			    		if (count % 2 === 0) {
			    			parent = container.append('<div class="row-fluid" id="' + id + '"></div>');
			    		}
			    		$('#'+id).html(function(index, text) {
			    			return text + '<div class="span6"><label for="' + key + '">' + key + '</label> <input type="text" id="' + key + '"/></div>';
			    		});
			    		count++;
			    	}
			    }
			});

			sheet = new CharSheet();
		});
	</script>
</head>

<body>
<div id="page1" class="container-narrow">
	<div class="jumbotron">
		<div class="masthead">
			<img src="images/l5r-logo.png" alt="L5R Logo" id="logo" class="pull-right" />
			<h1>L5R Character Sheet</h1>
		</div>
		<hr>
		<div id="info">
			<h2>Information</h2>		
		</div>
	</div>
</div>
</body>
</html>