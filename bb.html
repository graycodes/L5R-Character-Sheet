<!doctype html>
<html>
<head>
	<title>Backbone Test</title>
	<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="l5r.css">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.9/backbone-min.js"></script>
	<script>
		$(document).ready(function () {

			_.templateSettings = {
				interpolate: /\{\{(.+?)\}\}/g
			};

			window.Information = Backbone.Model.extend({
				defaults: {
					name: '',
					rank: '',
					clan: '',
					exp: '',
					school: '',
					insight: ''
				}
			});

			window.information = new Information();

			window.CharSheet = Backbone.View.extend({
				el: $('#info'),

				model: information,

				events: {
					"change input" : "setInfo",
				},

			    setInfo: function(e) {
			    	this.model.set(e.target.id, e.target.value);
			    },

			    initialize: function() {
			    	this.render();
			    },

			    render: function () {
					var template = _.template(this.el.innerHTML);
					this.el.innerHTML = template(this.model.defaults);
			    }
			});

			sheet = new CharSheet();
		});
	</script>
</head>

<body>
<div id="page1" class="container-narrow">
	<div class="jumbotron">
		<div class="masthead">
			<img src="images/l5r-logo.png" alt="L5R Logo" id="logo" class="pull-right" />
			<h1>L5R Character Sheet</h1>
		</div>
		<hr>
		<div id="info">
			<h2>Information</h2>
			<div class="row-fluid">
				<div class="span6">
					<label for="info-name">Name</label><input id="info-name" type="text" value="{{name}}" />
				</div>
				<div class="span6">
					<label for="info-rank">Rank</label><input id="info-rank" type="text" value="{{rank}}" />
				</div>
			</div>
			<div class="row-fluid">
				<div class="span6">
					<label for="info-clan">Clan</label><input id="info-clan" type="text" value="{{clan}}" />
				</div>
				<div class="span6">
					<label for="info-exp">Exp</label><input id="info-exp" type="text" value="{{exp}}" />
				</div>
			</div>
			<div class="row-fluid">
				<div class="span6">
					<label for="info-school">School</label><input id="info-school" type="text" value="{{school}}" />
				</div>
				<div class="span6">
					<label for="info-insight">Insight</label><input id="info-insight" type="text" value="{{insight}}" />
				</div>
			</div>
		</div>
		<hr>
	</div>
</div>
</body>
</html>